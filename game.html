<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Never Gonna Give You Up - Game Edition</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: Arial, sans-serif;
        }

        #game-container {
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        #rick-video {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .rick-text {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 32px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 1001;
            display: none;
            animation: rainbow 2s linear infinite;
        }

        @keyframes rainbow {
            0% { color: red; }
            17% { color: orange; }
            33% { color: yellow; }
            50% { color: green; }
            67% { color: blue; }
            83% { color: indigo; }
            100% { color: violet; }
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            z-index: 1002;
            display: none;
        }

        .back-button:hover {
            background: #ff3838;
        }
    </style>
</head>
<body>
    <div id="rick-text" class="rick-text">üéµ NEVER GONNA GIVE YOU UP! üéµ</div>
    <button id="back-btn" class="back-button" onclick="goBack()">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è</button>

    <div id="game-container">
        <iframe id="rick-video" width="560" height="315" src="https://www.youtube.com/embed/dQw4w9WgXcQ?si=20zmqgULybHiEdWc&amp;controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
        </iframe>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Phaser –∏–≥—Ä—ã —Å –†–∏–∫–æ–º
        class RickRollScene extends Phaser.Scene {
            constructor() {
                super({ key: 'RickRollScene' });
                this.rickImages = [];
                this.startTime = 0;
            }

            preload() {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –†–∏–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º placeholder)
                this.load.image('rick', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==');
            }

            create() {
                this.startTime = this.time.now;

                // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç
                const centerX = this.cameras.main.width / 2;
                const centerY = this.cameras.main.height / 2;

                // –ì–ª–∞–≤–Ω—ã–π —Ç–µ–∫—Å—Ç
                this.mainText = this.add.text(centerX, centerY - 100, '–ó–ê–ì–†–£–ó–ö–ê –ò–ì–†–´...', {
                    fontSize: '48px',
                    color: '#ffffff',
                    fontStyle: 'bold'
                }).setOrigin(0.5);

                // –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
                const barWidth = 400;
                const barHeight = 30;

                this.progressBar = this.add.graphics();
                this.progressBar.fillStyle(0x222222, 0.8);
                this.progressBar.fillRect(centerX - barWidth/2, centerY, barWidth, barHeight);

                this.progressFill = this.add.graphics();

                // –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏
                this.percentText = this.add.text(centerX, centerY + 50, '0%', {
                    fontSize: '24px',
                    color: '#ffffff'
                }).setOrigin(0.5);

                // –¢–∞–Ω—Ü—É—é—â–∏–µ –†–∏–∫–∏ –ø–æ –∫—Ä–∞—è–º
                this.createDancingRicks();
            }

            createDancingRicks() {
                const colors = [0xff0000, 0x00ff00, 0x0000ff, 0xffff00, 0xff00ff, 0x00ffff];

                for (let i = 0; i < 10; i++) {
                    const x = Phaser.Math.Between(50, this.cameras.main.width - 50);
                    const y = Phaser.Math.Between(50, this.cameras.main.height - 50);

                    const rick = this.add.rectangle(x, y, 30, 40, colors[i % colors.length]);
                    rick.setAlpha(0);

                    this.tweens.add({
                        targets: rick,
                        alpha: 1,
                        scaleX: 1.5,
                        scaleY: 1.5,
                        angle: 360,
                        duration: 2000,
                        delay: i * 200,
                        repeat: -1,
                        yoyo: true
                    });

                    this.rickImages.push(rick);
                }
            }

            update() {
                const elapsed = this.time.now - this.startTime;
                const progress = Math.min(elapsed / 3000, 1);

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
                this.progressFill.clear();
                this.progressFill.fillStyle(0x00ff00, 1);
                this.progressFill.fillRect(
                    this.cameras.main.width/2 - 200,
                    this.cameras.main.height/2,
                    400 * progress,
                    30
                );

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç
                this.percentText.setText(Math.floor(progress * 100) + '%');

                // –ü–æ—Å–ª–µ "–∑–∞–≥—Ä—É–∑–∫–∏" –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∏–∫—Ä–æ–ª–ª
                if (progress >= 1 && !this.rickrolled) {
                    this.rickrolled = true;
                    this.time.delayedCall(500, () => {
                        this.showRickRoll();
                    });
                }
            }

            showRickRoll() {
                // –û—á–∏—â–∞–µ–º —Å—Ü–µ–Ω—É
                this.children.removeAll();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∏–¥–µ–æ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã
                document.getElementById('rick-video').style.display = 'block';
                document.getElementById('rick-text').style.display = 'block';
                document.getElementById('back-btn').style.display = 'block';

                // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
                this.cameras.main.shake(500, 0.02);
                this.cameras.main.flash(500, 255, 255, 255);

                // –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã
                this.createConfetti();
            }

            createConfetti() {
                const particles = this.add.particles(0, 0, 'rick', {
                    x: { min: 0, max: this.cameras.main.width },
                    y: -50,
                    speed: { min: 100, max: 200 },
                    scale: { start: 1, end: 0 },
                    rotate: { min: 0, max: 360 },
                    lifespan: 3000,
                    frequency: 50,
                    tint: [0xff0000, 0x00ff00, 0x0000ff, 0xffff00, 0xff00ff]
                });
            }
        }

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            parent: 'game-container',
            transparent: true,
            scene: RickRollScene
        };

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        const game = new Phaser.Game(config);

        // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞
        function goBack() {
            window.location.href = 'index.html';
        }

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            console.log('üéµ Never gonna give you up');
            console.log('üéµ Never gonna let you down');
            console.log('üéµ Never gonna run around and desert you');

            // –ú–µ–Ω—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∫–ª–∞–¥–∫–∏
            let titleIndex = 0;
            const titles = [
                'üéµ Never Gonna Give You Up',
                'üé∂ Never Gonna Let You Down',
                'üéµ Never Gonna Run Around',
                'üé∂ And Desert You'
            ];

            setInterval(() => {
                document.title = titles[titleIndex % titles.length];
                titleIndex++;
            }, 2000);
        });

        // –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ø—ã—Ç–∫—É –∑–∞–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (—à—É—Ç–∫–∞)
        let attempts = 0;
        window.addEventListener('beforeunload', (e) => {
            if (attempts < 1) {
                attempts++;
                e.preventDefault();
                e.returnValue = '–†–∏–∫ –≠—Å—Ç–ª–∏ –Ω–µ –æ—Ç–ø—É—Å—Ç–∏—Ç —Ç–µ–±—è —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ! üéµ';
                return e.returnValue;
            }
        });
    </script>
</body>
</html>
